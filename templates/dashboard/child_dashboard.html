{% extends 'base.html' %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-8" x-data="{ speaking: false }">

    <!-- HoÅŸgeldin KartÄ± -->
    <div class="relative overflow-hidden bg-gradient-to-br from-minilab-blue-500 via-minilab-purple to-minilab-pink rounded-3xl shadow-2xl p-8 mb-8 text-white">
        <div class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"></div>
        <div class="absolute bottom-0 left-0 w-64 h-64 bg-white/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"></div>

        <div class="relative flex flex-col md:flex-row items-center justify-between gap-6">
            <div class="flex-1">
                <h1 class="font-display text-4xl md:text-5xl mb-3 animate-fade-in">
                    HoÅŸ geldin{% if user.first_name %}, {{ user.first_name }}{% endif %}! ğŸ‘‹
                </h1>
                <p class="text-xl text-white/90 mb-4">BugÃ¼n ne keÅŸfetmek istersin?</p>
                <div class="flex flex-wrap gap-3">
                    <span class="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-2xl text-sm font-semibold">
                        â­ {{ star_dust|default:0 }} Puan
                    </span>
                    <span class="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-2xl text-sm font-semibold">
                        ğŸ† {{ badge_count|default:0 }} Rozet
                    </span>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <!-- Dinle Butonu -->
                <button @click="Alpine.store('app').speak('HoÅŸ geldin! BugÃ¼n ne keÅŸfetmek istersin? AÅŸaÄŸÄ±daki bilim kategorilerinden birini seÃ§ebilir veya hikaye moduna geÃ§ebilirsin.'); speaking = true; setTimeout(() => speaking = false, 5000)"
                        class="bg-white/20 backdrop-blur-sm hover:bg-white/30 px-6 py-3 rounded-2xl flex items-center gap-2 transition-all hover:scale-105 shadow-lg"
                        :class="{ 'animate-pulse': speaking }">
                    <span x-show="!speaking" class="text-2xl">ğŸ”Š</span>
                    <span x-show="speaking" class="text-2xl">ğŸ—£ï¸</span>
                    <span class="font-bold text-lg">Dinle</span>
                </button>
                <div class="text-7xl animate-bounce-slow">ğŸ§ª</div>
            </div>
        </div>
    </div>

    <!-- GÃ¼nlÃ¼k Ã–dÃ¼l Banner -->
    <a href="{% url 'gamification:surprise_egg' %}"
       class="block relative overflow-hidden bg-gradient-to-r from-minilab-yellow via-minilab-orange-400 to-minilab-orange-500 rounded-3xl shadow-xl p-6 mb-8 cursor-pointer transition-all hover:scale-[1.02] hover:shadow-2xl group"
       x-data="{ claimed: false }">
        <div class="absolute top-0 right-0 w-32 h-32 bg-white/20 rounded-full blur-2xl"></div>
        <div class="relative flex items-center justify-between">
            <div class="flex items-center gap-6">
                <div class="text-6xl animate-wiggle group-hover:scale-110 transition-transform">ğŸ</div>
                <div>
                    <h3 class="font-display text-2xl font-bold text-white mb-1">GÃ¼nlÃ¼k SÃ¼rpriz Yumurta!</h3>
                    <p class="text-white/90 text-lg">TÄ±kla ve bugÃ¼nÃ¼n hediyesini aÃ§</p>
                </div>
            </div>
            <div class="bg-white text-minilab-orange-500 font-bold text-lg px-8 py-4 rounded-2xl shadow-lg group-hover:bg-minilab-blue-50 transition-all">
                AÃ§! ğŸ¥š
            </div>
        </div>
    </a>

    <!-- Kategoriler -->
    <h2 class="font-display text-3xl text-minilab-blue-600 dark:text-minilab-blue-400 mb-8 flex items-center gap-3">
        <span class="text-4xl">ğŸ”¬</span>
        Bilim Kategorileri
    </h2>

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6 mb-12">
        {% for category in categories %}
        <a href="{% url 'experiments:category_detail' category.slug %}"
           @mouseenter="Alpine.store('app').speak('{{ category.name }}')"
           class="group relative bg-white dark:bg-gray-800 rounded-3xl p-6 shadow-lg hover:shadow-2xl transition-all hover:-translate-y-2 overflow-hidden">
            <div class="absolute top-0 right-0 w-20 h-20 bg-gradient-to-br {% if category.color == 'blue' %}from-blue-400/20{% elif category.color == 'purple' %}from-purple-400/20{% elif category.color == 'green' %}from-green-400/20{% elif category.color == 'indigo' %}from-indigo-400/20{% elif category.color == 'cyan' %}from-cyan-400/20{% elif category.color == 'pink' %}from-pink-400/20{% elif category.color == 'emerald' %}from-emerald-400/20{% elif category.color == 'amber' %}from-amber-400/20{% elif category.color == 'red' %}from-red-400/20{% elif category.color == 'rose' %}from-rose-400/20{% else %}from-gray-400/20{% endif %} to-transparent rounded-bl-full"></div>
            <div class="relative flex flex-col items-center text-center">
                <span class="text-6xl mb-3 group-hover:scale-110 transition-transform">{{ category.icon }}</span>
                <span class="font-display font-bold text-base mb-1 {% if category.color == 'blue' %}text-blue-600{% elif category.color == 'purple' %}text-purple-600{% elif category.color == 'green' %}text-green-600{% elif category.color == 'indigo' %}text-indigo-600{% elif category.color == 'cyan' %}text-cyan-600{% elif category.color == 'pink' %}text-pink-600{% elif category.color == 'emerald' %}text-emerald-600{% elif category.color == 'amber' %}text-amber-600{% elif category.color == 'red' %}text-red-600{% elif category.color == 'rose' %}text-rose-600{% else %}text-gray-600{% endif %} leading-tight">{{ category.name }}</span>
                <span class="text-sm text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full">
                    {{ category.experiment_count }} deney
                </span>
            </div>
        </a>
        {% empty %}
        <p class="text-gray-500 col-span-full text-center">HenÃ¼z kategori eklenmemiÅŸ.</p>
        {% endfor %}
    </div>

    <!-- HÄ±zlÄ± EriÅŸim -->
    <h2 class="font-display text-3xl text-minilab-purple mb-8 flex items-center gap-3">
        <span class="text-4xl">âš¡</span>
        HÄ±zlÄ± EriÅŸim
    </h2>

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-12">
        <!-- Hikaye Modu -->
        <a href="{% url 'storymode:story_list' %}"
           @mouseenter="Alpine.store('app').speak('Hikaye Modu - Bilim masallarÄ±nÄ± keÅŸfet')"
           class="group relative bg-gradient-to-br from-minilab-purple to-minilab-pink rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all hover:-translate-y-2 overflow-hidden">
            <div class="absolute -top-4 -right-4 w-24 h-24 bg-white/20 rounded-full blur-xl"></div>
            <div class="relative flex flex-col items-center gap-4 text-center text-white">
                <div class="text-6xl group-hover:animate-wiggle">ğŸ“–</div>
                <div>
                    <h3 class="font-display text-xl font-bold mb-1">Hikaye Modu</h3>
                    <p class="text-white/80 text-sm">Bilim masallarÄ±</p>
                </div>
            </div>
        </a>

        <!-- Rozetlerim -->
        <a href="{% url 'gamification:badges' %}"
           @mouseenter="Alpine.store('app').speak('Rozetlerim - BaÅŸarÄ±larÄ±nÄ± gÃ¶r')"
           class="group relative bg-gradient-to-br from-minilab-yellow to-minilab-orange-400 rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all hover:-translate-y-2 overflow-hidden">
            <div class="absolute -top-4 -right-4 w-24 h-24 bg-white/20 rounded-full blur-xl"></div>
            <div class="relative flex flex-col items-center gap-4 text-center text-white">
                <div class="text-6xl group-hover:animate-wiggle">ğŸ†</div>
                <div>
                    <h3 class="font-display text-xl font-bold mb-1">Rozetlerim</h3>
                    <p class="text-white/80 text-sm">BaÅŸarÄ±larÄ±nÄ± gÃ¶r</p>
                </div>
            </div>
        </a>

        <!-- Avatar MaÄŸazasÄ± -->
        <a href="{% url 'gamification:shop' %}"
           @mouseenter="Alpine.store('app').speak('Avatar MaÄŸazasÄ± - Yeni ÅŸeyler satÄ±n al')"
           class="group relative bg-gradient-to-br from-cyan-500 to-blue-600 rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all hover:-translate-y-2 overflow-hidden">
            <div class="absolute -top-4 -right-4 w-24 h-24 bg-white/20 rounded-full blur-xl"></div>
            <div class="relative flex flex-col items-center gap-4 text-center text-white">
                <div class="text-6xl group-hover:animate-wiggle">ğŸ›’</div>
                <div>
                    <h3 class="font-display text-xl font-bold mb-1">MaÄŸaza</h3>
                    <p class="text-white/80 text-sm">Avatar Ã¶ÄŸeleri</p>
                </div>
            </div>
        </a>

        <!-- AvatarÄ±m -->
        <a href="{% url 'gamification:customize_avatar' %}"
           @mouseenter="Alpine.store('app').speak('AvatarÄ±m - AvatarÄ±nÄ± Ã¶zelleÅŸtir')"
           class="group relative bg-gradient-to-br from-rose-500 to-pink-600 rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all hover:-translate-y-2 overflow-hidden">
            <div class="absolute -top-4 -right-4 w-24 h-24 bg-white/20 rounded-full blur-xl"></div>
            <div class="relative flex flex-col items-center gap-4 text-center text-white">
                <div class="text-6xl group-hover:animate-wiggle">ğŸ‘¤</div>
                <div>
                    <h3 class="font-display text-xl font-bold mb-1">AvatarÄ±m</h3>
                    <p class="text-white/80 text-sm">Kendini Ã¶zelleÅŸtir</p>
                </div>
            </div>
        </a>
    </div>

    <!-- Oyunlar ve Aktiviteler -->
    <h2 class="font-display text-3xl text-minilab-green mb-8 flex items-center gap-3">
        <span class="text-4xl">ğŸ®</span>
        Oyunlar ve Aktiviteler
    </h2>

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-12">
        <!-- HafÄ±za Oyunu -->
        <a href="{% url 'storymode:memory_game' %}"
           @mouseenter="Alpine.store('app').speak('HafÄ±za Oyunu - KartlarÄ± eÅŸleÅŸtir')"
           class="group relative bg-gradient-to-br from-violet-500 to-purple-600 rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all hover:-translate-y-2 overflow-hidden">
            <div class="absolute -top-4 -right-4 w-24 h-24 bg-white/20 rounded-full blur-xl"></div>
            <div class="relative flex flex-col items-center gap-4 text-center text-white">
                <div class="text-6xl group-hover:animate-wiggle">ğŸ§©</div>
                <div>
                    <h3 class="font-display text-xl font-bold mb-1">HafÄ±za Oyunu</h3>
                    <p class="text-white/80 text-sm">KartlarÄ± eÅŸleÅŸtir</p>
                </div>
            </div>
        </a>

        <!-- Ã–ÄŸrenme KartlarÄ± -->
        <a href="{% url 'storymode:learning_cards' %}"
           @mouseenter="Alpine.store('app').speak('Ã–ÄŸrenme KartlarÄ± - Bilgi kartlarÄ±nÄ± keÅŸfet')"
           class="group relative bg-gradient-to-br from-emerald-500 to-teal-600 rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all hover:-translate-y-2 overflow-hidden">
            <div class="absolute -top-4 -right-4 w-24 h-24 bg-white/20 rounded-full blur-xl"></div>
            <div class="relative flex flex-col items-center gap-4 text-center text-white">
                <div class="text-6xl group-hover:animate-wiggle">ğŸƒ</div>
                <div>
                    <h3 class="font-display text-xl font-bold mb-1">Ã–ÄŸrenme KartlarÄ±</h3>
                    <p class="text-white/80 text-sm">Bilgi kartlarÄ±</p>
                </div>
            </div>
        </a>

        <!-- GeÃ§miÅŸim -->
        <a href="{% url 'accounts:history' %}"
           @mouseenter="Alpine.store('app').speak('GeÃ§miÅŸim - Ã–ÄŸrendiklerini gÃ¶r')"
           class="group relative bg-gradient-to-br from-minilab-green to-minilab-blue-400 rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all hover:-translate-y-2 overflow-hidden">
            <div class="absolute -top-4 -right-4 w-24 h-24 bg-white/20 rounded-full blur-xl"></div>
            <div class="relative flex flex-col items-center gap-4 text-center text-white">
                <div class="text-6xl group-hover:animate-wiggle">ğŸ“œ</div>
                <div>
                    <h3 class="font-display text-xl font-bold mb-1">GeÃ§miÅŸim</h3>
                    <p class="text-white/80 text-sm">Ã–ÄŸrendiklerini gÃ¶r</p>
                </div>
            </div>
        </a>

        <!-- Ayarlar -->
        <a href="{% url 'accounts:settings' %}"
           @mouseenter="Alpine.store('app').speak('Ayarlar - HesabÄ±nÄ± dÃ¼zenle')"
           class="group relative bg-gradient-to-br from-minilab-blue-500 to-minilab-blue-700 rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all hover:-translate-y-2 overflow-hidden">
            <div class="absolute -top-4 -right-4 w-24 h-24 bg-white/20 rounded-full blur-xl"></div>
            <div class="relative flex flex-col items-center gap-4 text-center text-white">
                <div class="text-6xl group-hover:animate-wiggle">âš™ï¸</div>
                <div>
                    <h3 class="font-display text-xl font-bold mb-1">Ayarlar</h3>
                    <p class="text-white/80 text-sm">HesabÄ±nÄ± dÃ¼zenle</p>
                </div>
            </div>
        </a>
    </div>

</div>
{% endblock %}
